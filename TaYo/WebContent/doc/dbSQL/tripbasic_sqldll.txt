create SEQUENCE sq_tripbasic_tripseq;

ALTER TABLE Trip_Detail
	DROP
		CONSTRAINT FK_Place_TO_Trip_Detail
		CASCADE;

ALTER TABLE Trip_Detail
	DROP
		CONSTRAINT FK_Trip_Basic_TO_Trip_Detail
		CASCADE;

ALTER TABLE Trip_Basic
	DROP
		CONSTRAINT FK_Member_TO_Trip_Basic
		CASCADE;

ALTER TABLE Place
	DROP
		CONSTRAINT FK_Location_TO_Place
		CASCADE;

ALTER TABLE Food
	DROP
		CONSTRAINT FK_Location_TO_Food
		CASCADE;

ALTER TABLE Member_detail
	DROP
		CONSTRAINT FK_Member_TO_Member_detail
		CASCADE;

ALTER TABLE TT_Leader
	DROP
		CONSTRAINT FK_Trip_Basic_TO_TT_Leader
		CASCADE;

ALTER TABLE TT_Ask
	DROP
		CONSTRAINT FK_TT_Leader_TO_TT_Ask
		CASCADE;

ALTER TABLE TT_Party
	DROP
		CONSTRAINT FK_Member_TO_TT_Party
		CASCADE;

ALTER TABLE TT_Party
	DROP
		CONSTRAINT FK_TT_Leader_TO_TT_Party
		CASCADE;

ALTER TABLE Trip_Basic
	DROP
		PRIMARY KEY
		CASCADE
		KEEP INDEX;

ALTER TABLE Place
	DROP
		PRIMARY KEY
		CASCADE
		KEEP INDEX;

ALTER TABLE Food
	DROP
		PRIMARY KEY
		CASCADE
		KEEP INDEX;

ALTER TABLE Location
	DROP
		PRIMARY KEY
		CASCADE
		KEEP INDEX;

ALTER TABLE ADMIN
	DROP
		PRIMARY KEY
		CASCADE
		KEEP INDEX;

ALTER TABLE Member
	DROP
		PRIMARY KEY
		CASCADE
		KEEP INDEX;

ALTER TABLE Member_detail
	DROP
		PRIMARY KEY
		CASCADE
		KEEP INDEX;

ALTER TABLE TT_Leader
	DROP
		PRIMARY KEY
		CASCADE
		KEEP INDEX;

ALTER TABLE TT_Ask
	DROP
		PRIMARY KEY
		CASCADE
		KEEP INDEX;

DROP INDEX PK_Trip_Basic;

DROP INDEX PK_Place;

DROP INDEX PK_Food;

DROP INDEX PK_Location;

DROP INDEX PK_ADMIN;

DROP INDEX PK_Member;

DROP INDEX PK_Member_detail;

DROP INDEX PK_TT_Leader;

DROP INDEX PK_TT_Ask;

/* 여행일정_상세 */
DROP TABLE Trip_Detail 
	CASCADE CONSTRAINTS;

/* 여행일정 */
DROP TABLE Trip_Basic 
	CASCADE CONSTRAINTS;

/* 관광지 */
DROP TABLE Place 
	CASCADE CONSTRAINTS;

/* 맛집 */
DROP TABLE Food 
	CASCADE CONSTRAINTS;

/* 지역 */
DROP TABLE Location 
	CASCADE CONSTRAINTS;

/* 관리자 */
DROP TABLE ADMIN 
	CASCADE CONSTRAINTS;

/* 회원 */
DROP TABLE Member 
	CASCADE CONSTRAINTS;

/* 회원상세 */
DROP TABLE Member_detail 
	CASCADE CONSTRAINTS;

/* 함께타요 */
DROP TABLE TT_Leader 
	CASCADE CONSTRAINTS;

/* 함께타요_문의 */
DROP TABLE TT_Ask 
	CASCADE CONSTRAINTS;

/* 함께타요_참가자 */
DROP TABLE TT_Party 
	CASCADE CONSTRAINTS;

/* 여행일정_상세 */
CREATE TABLE Trip_Detail (
	trip_seq NUMBER, /* 여행id */
	place_id VARCHAR2(25), /* 장소코드 */
	day NUMBER(5) NOT NULL, /* 일차 */
	image VARCHAR2(200), /* 이미지 */
	detail_title VARCHAR2(50) NOT NULL, /* 일정제목 */
	detail_content CLOB /* 일정설명 */
);

COMMENT ON TABLE Trip_Detail IS '여행일정_상세';

COMMENT ON COLUMN Trip_Detail.trip_seq IS '여행id';

COMMENT ON COLUMN Trip_Detail.place_id IS '장소코드';

COMMENT ON COLUMN Trip_Detail.day IS '일차';

COMMENT ON COLUMN Trip_Detail.image IS '이미지';

COMMENT ON COLUMN Trip_Detail.detail_title IS '일정제목';

COMMENT ON COLUMN Trip_Detail.detail_content IS '일정설명';

/* 여행일정 */
CREATE TABLE Trip_Basic (
	trip_seq NUMBER NOT NULL, /* 여행id */
	email VARCHAR2(35) NOT NULL, /* 이메일 */
	trip_title VARCHAR2(50) NOT NULL, /* 여행이름 */
	trip_theme VARCHAR2(15) NOT NULL, /* 여행테마 */
	trip_season VARCHAR2(4) NOT NULL, /* 여행시즌 */
	start_date DATE DEFAULT sysdate NOT NULL, /* 출발일 */
	end_date DATE DEFAULT sysdate NOT NULL, /* 종료일 */
	viewCount NUMBER, /* 조회수 */
	likeCount NUMBER /* 추천수 */
);

COMMENT ON TABLE Trip_Basic IS '여행일정';

COMMENT ON COLUMN Trip_Basic.trip_seq IS '여행id';

COMMENT ON COLUMN Trip_Basic.email IS '이메일';

COMMENT ON COLUMN Trip_Basic.trip_title IS '여행이름';

COMMENT ON COLUMN Trip_Basic.trip_theme IS '여행테마';

COMMENT ON COLUMN Trip_Basic.trip_season IS '여행시즌';

COMMENT ON COLUMN Trip_Basic.start_date IS '출발일';

COMMENT ON COLUMN Trip_Basic.end_date IS '종료일';

COMMENT ON COLUMN Trip_Basic.viewCount IS '조회수';

COMMENT ON COLUMN Trip_Basic.likeCount IS '추천수';

CREATE UNIQUE INDEX PK_Trip_Basic
	ON Trip_Basic (
		trip_seq ASC
	);

ALTER TABLE Trip_Basic
	ADD
		CONSTRAINT PK_Trip_Basic
		PRIMARY KEY (
			trip_seq
		);

/* 관광지 */
CREATE TABLE Place (
	place_id VARCHAR2(25) NOT NULL, /* 장소코드 */
	loc_id NUMBER NOT NULL, /* 지역코드 */
	place_name VARCHAR2(50) NOT NULL, /* 장소이름 */
	place_ctg VARCHAR2(25) NOT NULL, /* 장소종류 */
	place_price NUMBER, /* 장소입장료 */
	place_time DATE, /* 장소영업시간 */
	place_way VARCHAR2(100), /* 장소가는방법 */
	place_info CLOB /* 장소세부정보 */
);

COMMENT ON TABLE Place IS '관광지';

COMMENT ON COLUMN Place.place_id IS '장소코드';

COMMENT ON COLUMN Place.loc_id IS '지역코드';

COMMENT ON COLUMN Place.place_name IS '장소이름';

COMMENT ON COLUMN Place.place_ctg IS '장소종류';

COMMENT ON COLUMN Place.place_price IS '장소입장료';

COMMENT ON COLUMN Place.place_time IS '장소영업시간';

COMMENT ON COLUMN Place.place_way IS '장소가는방법';

COMMENT ON COLUMN Place.place_info IS '장소세부정보';

CREATE UNIQUE INDEX PK_Place
	ON Place (
		place_id ASC
	);

ALTER TABLE Place
	ADD
		CONSTRAINT PK_Place
		PRIMARY KEY (
			place_id
		);

/* 맛집 */
CREATE TABLE Food (
	food_id VARCHAR2(25) NOT NULL, /* 음식코드 */
	loc_id NUMBER, /* 지역코드 */
	food_name VARCHAR2(50) NOT NULL, /* 음식점이름 */
	food_ctg VARCHAR2(25) NOT NULL, /* 음식점종류 */
	food_price NUMBER, /* 음식가격 */
	food_time VARCHAR2(32), /* 음식영업시간 */
	food_way VARCHAR2(32), /* 음식가는방법 */
	food_info CLOB /* 음식세부정보 */
);

COMMENT ON TABLE Food IS '맛집';

COMMENT ON COLUMN Food.food_id IS '음식코드';

COMMENT ON COLUMN Food.loc_id IS '지역코드';

COMMENT ON COLUMN Food.food_name IS '음식점이름';

COMMENT ON COLUMN Food.food_ctg IS '음식점종류';

COMMENT ON COLUMN Food.food_price IS '음식가격';

COMMENT ON COLUMN Food.food_time IS '음식영업시간';

COMMENT ON COLUMN Food.food_way IS '음식가는방법';

COMMENT ON COLUMN Food.food_info IS '음식세부정보';

CREATE UNIQUE INDEX PK_Food
	ON Food (
		food_id ASC
	);

ALTER TABLE Food
	ADD
		CONSTRAINT PK_Food
		PRIMARY KEY (
			food_id
		);

/* 지역 */
CREATE TABLE Location (
	loc_id NUMBER NOT NULL, /* 지역코드 */
	loc_name VARCHAR2(50) /* 지역명칭 */
);

COMMENT ON TABLE Location IS '지역';

COMMENT ON COLUMN Location.loc_id IS '지역코드';

COMMENT ON COLUMN Location.loc_name IS '지역명칭';

CREATE UNIQUE INDEX PK_Location
	ON Location (
		loc_id ASC
	);

ALTER TABLE Location
	ADD
		CONSTRAINT PK_Location
		PRIMARY KEY (
			loc_id
		);

/* 관리자 */
CREATE TABLE ADMIN (
	admin_email VARCHAR2(35) NOT NULL, /* 관리자이메일 */
	admin_pass VARCHAR2(35), /* 관리자패스워드 */
	admin_name VARCHAR2(10) /* 관리자이름 */
);

COMMENT ON TABLE ADMIN IS '관리자';

COMMENT ON COLUMN ADMIN.admin_email IS '관리자이메일';

COMMENT ON COLUMN ADMIN.admin_pass IS '관리자패스워드';

COMMENT ON COLUMN ADMIN.admin_name IS '관리자이름';

CREATE UNIQUE INDEX PK_ADMIN
	ON ADMIN (
		admin_email ASC
	);

ALTER TABLE ADMIN
	ADD
		CONSTRAINT PK_ADMIN
		PRIMARY KEY (
			admin_email
		);

/* 회원 */
CREATE TABLE Member (
	email VARCHAR2(35) NOT NULL, /* 이메일 */
	name VARCHAR2(10) NOT NULL, /* 이름 */
	pass VARCHAR2(35) NOT NULL, /* 패스워드 */
	age NUMBER(3), /* 나이 */
	grade NUMBER(1) NOT NULL, /* 등급 */
	gender VARCHAR2(2) /* 성별 */
);

COMMENT ON TABLE Member IS '회원';

COMMENT ON COLUMN Member.email IS '이메일';

COMMENT ON COLUMN Member.name IS '이름';

COMMENT ON COLUMN Member.pass IS '패스워드';

COMMENT ON COLUMN Member.age IS '나이';

COMMENT ON COLUMN Member.grade IS '등급';

COMMENT ON COLUMN Member.gender IS '성별';

CREATE UNIQUE INDEX PK_Member
	ON Member (
		email ASC
	);

ALTER TABLE Member
	ADD
		CONSTRAINT PK_Member
		PRIMARY KEY (
			email
		);

/* 회원상세 */
CREATE TABLE Member_detail (
	email VARCHAR2(35) NOT NULL, /* 이메일 */
	address VARCHAR2(100), /* 주소 */
	address_detail VARCHAR2(100), /* 상세주소 */
	joindate DATE, /* 가입일 */
	outdate DATE /* 탈퇴일 */
);

COMMENT ON TABLE Member_detail IS '회원상세';

COMMENT ON COLUMN Member_detail.email IS '이메일';

COMMENT ON COLUMN Member_detail.address IS '주소';

COMMENT ON COLUMN Member_detail.address_detail IS '상세주소';

COMMENT ON COLUMN Member_detail.joindate IS '가입일';

COMMENT ON COLUMN Member_detail.outdate IS '탈퇴일';

CREATE UNIQUE INDEX PK_Member_detail
	ON Member_detail (
		email ASC
	);

ALTER TABLE Member_detail
	ADD
		CONSTRAINT PK_Member_detail
		PRIMARY KEY (
			email
		);

/* 함께타요 */
CREATE TABLE TT_Leader (
	trip_seq NUMBER NOT NULL, /* 함께타요id */
	trip_num NUMBER(3) NOT NULL, /* 여행정원 */
	now_num NUMBER(3) NOT NULL /* 현재인원 */
);

COMMENT ON TABLE TT_Leader IS '함께타요';

COMMENT ON COLUMN TT_Leader.trip_seq IS '함께타요id';

COMMENT ON COLUMN TT_Leader.trip_num IS '여행정원';

COMMENT ON COLUMN TT_Leader.now_num IS '현재인원';

CREATE UNIQUE INDEX PK_TT_Leader
	ON TT_Leader (
		trip_seq ASC
	);

ALTER TABLE TT_Leader
	ADD
		CONSTRAINT PK_TT_Leader
		PRIMARY KEY (
			trip_seq
		);

/* 함께타요_문의 */
CREATE TABLE TT_Ask (
	trip_seq NUMBER NOT NULL, /* 함께타요id */
	ask_title VARCHAR2(50) NOT NULL, /* 문의제목 */
	ask_contents CLOB /* 문의내용 */
);

COMMENT ON TABLE TT_Ask IS '함께타요_문의';

COMMENT ON COLUMN TT_Ask.trip_seq IS '함께타요id';

COMMENT ON COLUMN TT_Ask.ask_title IS '문의제목';

COMMENT ON COLUMN TT_Ask.ask_contents IS '문의내용';

CREATE UNIQUE INDEX PK_TT_Ask
	ON TT_Ask (
		trip_seq ASC
	);

ALTER TABLE TT_Ask
	ADD
		CONSTRAINT PK_TT_Ask
		PRIMARY KEY (
			trip_seq
		);

/* 함께타요_참가자 */
CREATE TABLE TT_Party (
	trip_seq NUMBER NOT NULL, /* 함께타요id */
	party_email VARCHAR2(35) NOT NULL, /* 참여자이메일 */
	party_ok NUMBER(1) NOT NULL /* 가입수락여부 */
);

COMMENT ON TABLE TT_Party IS '함께타요_참가자';

COMMENT ON COLUMN TT_Party.trip_seq IS '함께타요id';

COMMENT ON COLUMN TT_Party.party_email IS '참여자이메일';

COMMENT ON COLUMN TT_Party.party_ok IS '가입수락여부';

ALTER TABLE Trip_Detail
	ADD
		CONSTRAINT FK_Place_TO_Trip_Detail
		FOREIGN KEY (
			place_id
		)
		REFERENCES Place (
			place_id
		);

ALTER TABLE Trip_Detail
	ADD
		CONSTRAINT FK_Trip_Basic_TO_Trip_Detail
		FOREIGN KEY (
			trip_seq
		)
		REFERENCES Trip_Basic (
			trip_seq
		);

ALTER TABLE Trip_Basic
	ADD
		CONSTRAINT FK_Member_TO_Trip_Basic
		FOREIGN KEY (
			email
		)
		REFERENCES Member (
			email
		);

ALTER TABLE Place
	ADD
		CONSTRAINT FK_Location_TO_Place
		FOREIGN KEY (
			loc_id
		)
		REFERENCES Location (
			loc_id
		);

ALTER TABLE Food
	ADD
		CONSTRAINT FK_Location_TO_Food
		FOREIGN KEY (
			loc_id
		)
		REFERENCES Location (
			loc_id
		);

ALTER TABLE Member_detail
	ADD
		CONSTRAINT FK_Member_TO_Member_detail
		FOREIGN KEY (
			email
		)
		REFERENCES Member (
			email
		);

ALTER TABLE TT_Leader
	ADD
		CONSTRAINT FK_Trip_Basic_TO_TT_Leader
		FOREIGN KEY (
			trip_seq
		)
		REFERENCES Trip_Basic (
			trip_seq
		);

ALTER TABLE TT_Ask
	ADD
		CONSTRAINT FK_TT_Leader_TO_TT_Ask
		FOREIGN KEY (
			trip_seq
		)
		REFERENCES TT_Leader (
			trip_seq
		);

ALTER TABLE TT_Party
	ADD
		CONSTRAINT FK_Member_TO_TT_Party
		FOREIGN KEY (
			party_email
		)
		REFERENCES Member (
			email
		);

ALTER TABLE TT_Party
	ADD
		CONSTRAINT FK_TT_Leader_TO_TT_Party
		FOREIGN KEY (
			trip_seq
		)
		REFERENCES TT_Leader (
			trip_seq
		);
		
		
		